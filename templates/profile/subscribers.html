{% extends "base.html" %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-6">
  <div class="flex items-center gap-4">
    <img src="{{ url_for('uploaded_file', filename='avatars/' + (profile_user.avatar if profile_user.avatar else 'default_avatar.png')) }}" class="w-16 h-16 rounded-full object-cover" alt="{{ profile_user.display_name }}">
    <div>
      <h1 class="text-2xl font-semibold">{{ profile_user.display_name }}</h1>
      <p class="text-zinc-500">@{{ profile_user.username }}</p>
    </div>
  </div>
  
  <div class="flex gap-4 border-b border-zinc-200">
    <a href="{{ url_for('profile', username=profile_user.username) }}" class="px-4 py-2 text-zinc-500 hover:text-zinc-900">Посты</a>
    <a href="{{ url_for('subscribers', username=profile_user.username) }}" class="px-4 py-2 border-b-2 border-zinc-900">Подписчики ({{ subscribers|length }})</a>
    <a href="{{ url_for('subscriptions', username=profile_user.username) }}" class="px-4 py-2 text-zinc-500 hover:text-zinc-900">Подписки</a>
  </div>
  
  {% if subscribers %}
    <div class="space-y-4">
      {% for user in subscribers %}
        <div class="flex items-center justify-between p-4 bg-zinc-50 rounded-lg">
          <div class="flex items-center gap-3">
            <img src="{{ url_for('uploaded_file', filename='avatars/' + (user.avatar if user.avatar else 'default_avatar.png')) }}" class="w-12 h-12 rounded-full object-cover" alt="{{ user.display_name }}">
            <div>
              <a href="{{ url_for('profile', username=user.username) }}" class="font-medium hover:underline">{{ user.display_name }}</a>
              <p class="text-sm text-zinc-500">@{{ user.username }}</p>
            </div>
          </div>
          {% if current_user.is_authenticated and current_user.id != user.id %}
            <form action="{{ url_for('subscribe', user_id=user.id) }}" method="POST">
              <button type="submit" class="px-4 py-1.5 text-sm {% if user.is_subscribed %}bg-zinc-200{% else %}bg-zinc-900 text-white{% endif %} rounded hover:bg-zinc-700">
                {{ 'Отписаться' if user.is_subscribed else 'Подписаться' }}
              </button>
            </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-zinc-500 text-center py-8">Нет подписчиков</p>
  {% endif %}
</div>
{% endblock %}
