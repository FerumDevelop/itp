{% extends "base.html" %}

{% block content %}
<h1 class="text-2xl font-semibold mb-6">Заявка #{{ application.id }}</h1>

<div class="border border-zinc-200 rounded-lg p-5 bg-white max-w-xl">
  <div class="flex items-center gap-3 mb-4">
    <img src="{{ url_for('uploaded_file', filename=application.user.avatar if application.user else 'default_avatar.png') }}" alt="" class="w-12 h-12 rounded-full bg-zinc-100">
    <div>
      <p class="font-medium">{{ application.user.display_name if application.user else 'Unknown' }}</p>
      <p class="text-zinc-500">@{{ application.user.username if application.user else 'unknown' }}</p>
    </div>
    <span class="ml-auto px-2 py-1 bg-zinc-100 rounded text-sm">{{ application.status }}</span>
  </div>
  
  <p class="text-sm text-zinc-500 mb-2">Дата: {{ application.created_at[:10] if application.created_at else '' }}</p>
  
  <div class="border-t border-zinc-200 pt-4 mt-4">
    <p class="font-medium mb-2">Сообщение:</p>
    <p class="whitespace-pre-wrap">{{ application.message }}</p>
  </div>
  
  {% if application.photos %}
    <div class="border-t border-zinc-200 pt-4 mt-4">
      <p class="font-medium mb-2">Фото:</p>
      <div class="flex gap-2 flex-wrap">
        {% for photo in application.photos %}
          <img src="{{ url_for('uploaded_file', filename=photo) }}" alt="" class="w-24 h-24 rounded object-cover bg-zinc-100">
        {% endfor %}
      </div>
    </div>
  {% endif %}
  
  {% if application.status == 'pending' %}
    <div class="flex gap-2 mt-4">
      <a href="{{ url_for('admin_approve_application', app_id=application.id) }}" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Одобрить</a>
      <a href="{{ url_for('admin_reject_application', app_id=application.id) }}" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Отклонить</a>
    </div>
  {% endif %}
</div>
{% endblock %}
